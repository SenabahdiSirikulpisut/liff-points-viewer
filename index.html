<script>
  const backendUrl = "https://script.google.com/macros/s/AKfycbwMZpGW2msVBYV_JiWCnhdA-yyt1njcfEwPmKw1TrEDMs7YTQDbUP_v4k_mwDQjvtiS/exec"; // your GAS URL
  const callbackName = "handleData";
  const testUserId = "123"; // change to your real ID
  const testName = "John";

  // Step 1: Test request without JSONP parsing
  async function testBackend() {
    const url = `${backendUrl}?callback=${callbackName}&userId=${encodeURIComponent(testUserId)}&name=${encodeURIComponent(testName)}`;
    console.log("Testing backend URL:", url);

    try {
      const res = await fetch(url);
      const text = await res.text();
      console.log("RAW RESPONSE from backend:\n", text);

      // Step 2: Check if it looks like JSONP
      if (text.startsWith(callbackName + "(")) {
        console.log("✅ Backend is returning JSONP correctly. Now injecting script...");
        loadJsonp(url);
      } else {
        console.error("❌ Backend is NOT returning JSONP format. Check GAS code.");
      }
    } catch (err) {
      console.error("❌ Error fetching backend:", err);
    }
  }

  // Step 3: JSONP loader
  function loadJsonp(url) {
    const script = document.createElement("script");
    script.src = url;
    document.body.appendChild(script);
  }

  // Step 4: Define global callback
  function handleData(data) {
    console.log("✅ JSONP callback executed. Data:", data);
  }

  // Run the test
  testBackend();
</script>










